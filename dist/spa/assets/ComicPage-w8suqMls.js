import{Q as gt}from"./QImg-CqMj3lpd.js";import{k as ae,c as x,h as A,l as ne,_ as yt,$ as wt,a as Ct,t as Ce,a0 as je,g as pe,r as P,v as Ke,o as We,K as ee,a1 as _t,Q as te,B as qt,a2 as xt,a3 as Tt,U as ve,w as re,a4 as Pt,a5 as kt,y as St,a6 as At,a7 as _e,a8 as le,a9 as qe,D as It,aa as de,ab as Me,ac as $t,ad as Vt,ae as Lt,af as Bt,ag as Qt,V as Dt,d as He,O as Xe,G as X,I as E,H as q,L as Ye,X as Ge,f,W as T,J as y,p as W,Y as Je,Z as H,F as Ze,ah as Rt,ai as Mt,M as Nt}from"./index-BASOLPem.js";import{r as Et,u as et,Q as tt,a as at,b as Ft}from"./chaptersListStore-CkubbnSM.js";import{a as fe,b as Ut,Q as zt,c as Ot}from"./QSkeleton-iy_a7nSC.js";import{b as jt,c as Kt,a as nt}from"./authStore-BuVcws2a.js";import{Q as Wt,a as Ht,C as me}from"./ClosePopup-0zHzVb_B.js";import{d as xe,e as Xt,Q as Te}from"./focusout-B5i7jXWr.js";import{u as ke}from"./use-timeout-ARCC4Yza.js";import{u as ot,Q as Yt}from"./comicStore-BKQoTAWW.js";import{Q as Pe}from"./QInput-DsrQEdcL.js";import{c as Ne}from"./comicsService-zQ_bKKs8.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-DGCM4XXZ.js";const Z=ae({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:a}){const s=x(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>A(e.tag,{class:s.value},ne(a.default))}}),rt=ae({name:"QCardActions",props:{...yt,vertical:Boolean},setup(e,{slots:a}){const s=wt(e),n=x(()=>`q-card__actions ${s.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>A("div",{class:n.value},ne(a.default))}});let Gt=0;const Jt=["click","keydown"],Zt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Gt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ea(e,a,s,n){const i=Ct(je,Ce);if(i===Ce)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ce;const{proxy:t}=pe(),u=P(null),b=P(null),C=P(null),$=x(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),p=x(()=>i.currentModel.value===e.name),c=x(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(p.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),l=x(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),d=x(()=>e.disable===!0||i.hasFocus.value===!0||p.value===!1&&i.hasActiveTab.value===!0?-1:e.tabindex||0);function I(h,V){if(V!==!0&&h?.qAvoidFocus!==!0&&u.value?.focus(),e.disable!==!0){i.updateModel({name:e.name}),s("click",h);return}}function B(h){xt(h,[13,32])?I(h,!0):Tt(h)!==!0&&h.keyCode>=35&&h.keyCode<=40&&h.altKey!==!0&&h.metaKey!==!0&&i.onKbdNavigate(h.keyCode,t.$el)===!0&&ve(h),s("keydown",h)}function N(){const h=i.tabProps.value.narrowIndicator,V=[],Q=A("div",{ref:C,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});e.icon!==void 0&&V.push(A(te,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&V.push(A("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&V.push(e.alertIcon!==void 0?A(te,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):A("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),h===!0&&V.push(Q);const M=[A("div",{class:"q-focus-helper",tabindex:-1,ref:u}),A("div",{class:l.value},qt(a.default,V))];return h===!1&&M.push(Q),M}const F={name:x(()=>e.name),rootRef:b,tabIndicatorRef:C,routeData:n};Ke(()=>{i.unregisterTab(F)}),We(()=>{i.registerTab(F)});function Y(h,V){const Q={ref:b,class:c.value,tabindex:d.value,role:"tab","aria-selected":p.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:I,onKeydown:B,...V};return ee(A(h,Q,N()),[[_t,$.value]])}return{renderTab:Y,$tabs:i}}const Ee=ae({name:"QTab",props:Zt,emits:Jt,setup(e,{slots:a,emit:s}){const{renderTab:n}=ea(e,a,s);return()=>n("div")}});function ta(e,a,s){const n=s===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?n[0]:n[1]}${e?` text-${e}`:""}`}const aa=["left","center","right","justify"],na=ae({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>aa.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:a,emit:s}){const{proxy:n}=pe(),{$q:i}=n,{registerTick:t}=xe(),{registerTick:u}=xe(),{registerTick:b}=xe(),{registerTimeout:C,removeTimeout:$}=ke(),{registerTimeout:p,removeTimeout:c}=ke(),l=P(null),d=P(null),I=P(e.modelValue),B=P(!1),N=P(!0),F=P(!1),Y=P(!1),h=[],V=P(0),Q=P(!1);let M=null,U=null,D;const se=x(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:ta(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),ie=x(()=>{const o=V.value,r=I.value;for(let m=0;m<o;m++)if(h[m].name.value===r)return!0;return!1}),he=x(()=>`q-tabs__content--align-${B.value===!0?"left":Y.value===!0?"justify":e.align}`),be=x(()=>`q-tabs row no-wrap items-center q-tabs--${B.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),ge=x(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+he.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),v=x(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),_=x(()=>e.vertical!==!0&&i.lang.rtl===!0),R=x(()=>Et===!1&&_.value===!0);re(_,J),re(()=>e.modelValue,o=>{O({name:o,setCurrent:!0,skipEmit:!0})}),re(()=>e.outsideArrows,ue);function O({name:o,setCurrent:r,skipEmit:m}){I.value!==o&&(m!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",o),(r===!0||e["onUpdate:modelValue"]===void 0)&&(st(I.value,o),I.value=o))}function ue(){t(()=>{l.value&&Ae({width:l.value.offsetWidth,height:l.value.offsetHeight})})}function Ae(o){if(v.value===void 0||d.value===null)return;const r=o[v.value.container],m=Math.min(d.value[v.value.scroll],Array.prototype.reduce.call(d.value.children,(S,w)=>S+(w[v.value.content]||0),0)),k=r>0&&m>r;B.value=k,k===!0&&u(J),Y.value=r<parseInt(e.breakpoint,10)}function st(o,r){const m=o!=null&&o!==""?h.find(S=>S.name.value===o):null,k=r!=null&&r!==""?h.find(S=>S.name.value===r):null;if(ce===!0)ce=!1;else if(m&&k){const S=m.tabIndicatorRef.value,w=k.tabIndicatorRef.value;M!==null&&(clearTimeout(M),M=null),S.style.transition="none",S.style.transform="none",w.style.transition="none",w.style.transform="none";const g=S.getBoundingClientRect(),L=w.getBoundingClientRect();w.style.transform=e.vertical===!0?`translate3d(0,${g.top-L.top}px,0) scale3d(1,${L.height?g.height/L.height:1},1)`:`translate3d(${g.left-L.left}px,0,0) scale3d(${L.width?g.width/L.width:1},1,1)`,b(()=>{M=setTimeout(()=>{M=null,w.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",w.style.transform="none"},70)})}k&&B.value===!0&&G(k.rootRef.value)}function G(o){const{left:r,width:m,top:k,height:S}=d.value.getBoundingClientRect(),w=o.getBoundingClientRect();let g=e.vertical===!0?w.top-k:w.left-r;if(g<0){d.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(g),J();return}g+=e.vertical===!0?w.height-S:w.width-m,g>0&&(d.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(g),J())}function J(){const o=d.value;if(o===null)return;const r=o.getBoundingClientRect(),m=e.vertical===!0?o.scrollTop:Math.abs(o.scrollLeft);_.value===!0?(N.value=Math.ceil(m+r.width)<o.scrollWidth-1,F.value=m>0):(N.value=m>0,F.value=e.vertical===!0?Math.ceil(m+r.height)<o.scrollHeight:Math.ceil(m+r.width)<o.scrollWidth)}function Ie(o){U!==null&&clearInterval(U),U=setInterval(()=>{ct(o)===!0&&j()},5)}function $e(){Ie(R.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ve(){Ie(R.value===!0?0:Number.MAX_SAFE_INTEGER)}function j(){U!==null&&(clearInterval(U),U=null)}function it(o,r){const m=Array.prototype.filter.call(d.value.children,L=>L===r||L.matches&&L.matches(".q-tab.q-focusable")===!0),k=m.length;if(k===0)return;if(o===36)return G(m[0]),m[0].focus(),!0;if(o===35)return G(m[k-1]),m[k-1].focus(),!0;const S=o===(e.vertical===!0?38:37),w=o===(e.vertical===!0?40:39),g=S===!0?-1:w===!0?1:void 0;if(g!==void 0){const L=_.value===!0?-1:1,z=m.indexOf(r)+g*L;return z>=0&&z<k&&(G(m[z]),m[z].focus({preventScroll:!0})),!0}}const ut=x(()=>R.value===!0?{get:o=>Math.abs(o.scrollLeft),set:(o,r)=>{o.scrollLeft=-r}}:e.vertical===!0?{get:o=>o.scrollTop,set:(o,r)=>{o.scrollTop=r}}:{get:o=>o.scrollLeft,set:(o,r)=>{o.scrollLeft=r}});function ct(o){const r=d.value,{get:m,set:k}=ut.value;let S=!1,w=m(r);const g=o<w?-1:1;return w+=g*5,w<0?(S=!0,w=0):(g===-1&&w<=o||g===1&&w>=o)&&(S=!0,w=o),k(r,w),J(),S}function Le(o,r){for(const m in o)if(o[m]!==r[m])return!1;return!0}function dt(){let o=null,r={matchedLen:0,queryDiff:9999,hrefLen:0};const m=h.filter(g=>g.routeData?.hasRouterLink.value===!0),{hash:k,query:S}=n.$route,w=Object.keys(S).length;for(const g of m){const L=g.routeData.exact.value===!0;if(g.routeData[L===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:z,query:ye,matched:ht,href:bt}=g.routeData.resolvedLink.value,we=Object.keys(ye).length;if(L===!0){if(z!==k||we!==w||Le(S,ye)===!1)continue;o=g.name.value;break}if(z!==""&&z!==k||we!==0&&Le(ye,S)===!1)continue;const K={matchedLen:ht.length,queryDiff:w-we,hrefLen:bt.length-z.length};if(K.matchedLen>r.matchedLen){o=g.name.value,r=K;continue}else if(K.matchedLen!==r.matchedLen)continue;if(K.queryDiff<r.queryDiff)o=g.name.value,r=K;else if(K.queryDiff!==r.queryDiff)continue;K.hrefLen>r.hrefLen&&(o=g.name.value,r=K)}if(o===null&&h.some(g=>g.routeData===void 0&&g.name.value===I.value)===!0){ce=!1;return}O({name:o,setCurrent:!0})}function vt(o){if($(),Q.value!==!0&&l.value!==null&&o.target&&typeof o.target.closest=="function"){const r=o.target.closest(".q-tab");r&&l.value.contains(r)===!0&&(Q.value=!0,B.value===!0&&G(r))}}function ft(){C(()=>{Q.value=!1},30)}function oe(){Qe.avoidRouteWatcher===!1?p(dt):c()}function Be(){if(D===void 0){const o=re(()=>n.$route.fullPath,oe);D=()=>{o(),D=void 0}}}function mt(o){h.push(o),V.value++,ue(),o.routeData===void 0||n.$route===void 0?p(()=>{if(B.value===!0){const r=I.value,m=r!=null&&r!==""?h.find(k=>k.name.value===r):null;m&&G(m.rootRef.value)}}):(Be(),o.routeData.hasRouterLink.value===!0&&oe())}function pt(o){h.splice(h.indexOf(o),1),V.value--,ue(),D!==void 0&&o.routeData!==void 0&&(h.every(r=>r.routeData===void 0)===!0&&D(),oe())}const Qe={currentModel:I,tabProps:se,hasFocus:Q,hasActiveTab:ie,registerTab:mt,unregisterTab:pt,verifyRouteModel:oe,updateModel:O,onKbdNavigate:it,avoidRouteWatcher:!1};St(je,Qe);function De(){M!==null&&clearTimeout(M),j(),D?.()}let Re,ce;return Ke(De),Pt(()=>{Re=D!==void 0,De()}),kt(()=>{Re===!0&&(Be(),ce=!0,oe()),ue()}),()=>A("div",{ref:l,class:be.value,role:"tablist",onFocusin:vt,onFocusout:ft},[A(Wt,{onResize:Ae}),A("div",{ref:d,class:ge.value,onScroll:J},ne(a.default)),A(te,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(N.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||i.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:$e,onTouchstartPassive:$e,onMouseupPassive:j,onMouseleavePassive:j,onTouchendPassive:j}),A(te,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||i.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Ve,onTouchstartPassive:Ve,onMouseupPassive:j,onMouseleavePassive:j,onTouchendPassive:j})])}}),Se={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},oa=Object.keys(Se);Se.all=!0;function Fe(e){const a={};for(const s of oa)e[s]===!0&&(a[s]=!0);return Object.keys(a).length===0?Se:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}const la=["INPUT","TEXTAREA"];function Ue(e,a){return a.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof a.handler=="function"&&la.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(a.uid)===-1)}function ra(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((s,n)=>{const i=parseFloat(s);i&&(a[n]=i)}),a}const sa=At({name:"touch-swipe",beforeMount(e,{value:a,arg:s,modifiers:n}){if(n.mouse!==!0&&le.has.touch!==!0)return;const i=n.mouseCapture===!0?"Capture":"",t={handler:a,sensitivity:ra(s),direction:Fe(n),noop:It,mouseStart(u){Ue(u,t)&&$t(u)&&(de(t,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(u,!0))},touchStart(u){if(Ue(u,t)){const b=u.target;de(t,"temp",[[b,"touchmove","move","notPassiveCapture"],[b,"touchcancel","end","notPassiveCapture"],[b,"touchend","end","notPassiveCapture"]]),t.start(u)}},start(u,b){le.is.firefox===!0&&qe(e,!0);const C=Me(u);t.event={x:C.left,y:C.top,time:Date.now(),mouse:b===!0,dir:!1}},move(u){if(t.event===void 0)return;if(t.event.dir!==!1){ve(u);return}const b=Date.now()-t.event.time;if(b===0)return;const C=Me(u),$=C.left-t.event.x,p=Math.abs($),c=C.top-t.event.y,l=Math.abs(c);if(t.event.mouse!==!0){if(p<t.sensitivity[1]&&l<t.sensitivity[1]){t.end(u);return}}else if(window.getSelection().toString()!==""){t.end(u);return}else if(p<t.sensitivity[2]&&l<t.sensitivity[2])return;const d=p/b,I=l/b;t.direction.vertical===!0&&p<l&&p<100&&I>t.sensitivity[0]&&(t.event.dir=c<0?"up":"down"),t.direction.horizontal===!0&&p>l&&l<100&&d>t.sensitivity[0]&&(t.event.dir=$<0?"left":"right"),t.direction.up===!0&&p<l&&c<0&&p<100&&I>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&p<l&&c>0&&p<100&&I>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&p>l&&$<0&&l<100&&d>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&p>l&&$>0&&l<100&&d>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(ve(u),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Xt(),t.styleCleanup=B=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const N=()=>{document.body.classList.remove("no-pointer-events--children")};B===!0?setTimeout(N,50):N()}),t.handler({evt:u,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:b,distance:{x:p,y:l}})):t.end(u)},end(u){t.event!==void 0&&(_e(t,"temp"),le.is.firefox===!0&&qe(e,!1),t.styleCleanup?.(!0),u!==void 0&&t.event.dir!==!1&&ve(u),t.event=void 0)}};if(e.__qtouchswipe=t,n.mouse===!0){const u=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";de(t,"main",[[e,"mousedown","mouseStart",`passive${u}`]])}le.has.touch===!0&&de(t,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const s=e.__qtouchswipe;s!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&s.end(),s.handler=a.value),s.direction=Fe(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(_e(a,"main"),_e(a,"temp"),le.is.firefox===!0&&qe(e,!1),a.styleCleanup?.(),delete e.__qtouchswipe)}});function ia(){let e=Object.create(null);return{getCache:(a,s)=>e[a]===void 0?e[a]=typeof s=="function"?s():s:e[a],setCache(a,s){e[a]=s},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const ua={name:{required:!0},disable:Boolean},ze={setup(e,{slots:a}){return()=>A("div",{class:"q-panel scroll",role:"tabpanel"},ne(a.default))}},ca={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},da=["update:modelValue","beforeTransition","transition"];function va(){const{props:e,emit:a,proxy:s}=pe(),{getCache:n}=ia(),{registerTimeout:i}=ke();let t,u;const b=P(null),C={value:null};function $(v){const _=e.vertical===!0?"up":"left";D((s.$q.lang.rtl===!0?-1:1)*(v.direction===_?1:-1))}const p=x(()=>[[sa,$,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),c=x(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),l=x(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),d=x(()=>`--q-transition-duration: ${e.transitionDuration}ms`),I=x(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),B=x(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),N=x(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);re(()=>e.modelValue,(v,_)=>{const R=V(v)===!0?Q(v):-1;u!==!0&&U(R===-1?0:R<Q(_)?-1:1),C.value!==R&&(C.value=R,a("beforeTransition",v,_),i(()=>{a("transition",v,_)},e.transitionDuration))});function F(){D(1)}function Y(){D(-1)}function h(v){a("update:modelValue",v)}function V(v){return v!=null&&v!==""}function Q(v){return t.findIndex(_=>_.props.name===v&&_.props.disable!==""&&_.props.disable!==!0)}function M(){return t.filter(v=>v.props.disable!==""&&v.props.disable!==!0)}function U(v){const _=v!==0&&e.animated===!0&&C.value!==-1?"q-transition--"+(v===-1?c.value:l.value):null;b.value!==_&&(b.value=_)}function D(v,_=C.value){let R=_+v;for(;R!==-1&&R<t.length;){const O=t[R];if(O!==void 0&&O.props.disable!==""&&O.props.disable!==!0){U(v),u=!0,a("update:modelValue",O.props.name),setTimeout(()=>{u=!1});return}R+=v}e.infinite===!0&&t.length!==0&&_!==-1&&_!==t.length&&D(v,v===-1?t.length:-1)}function se(){const v=Q(e.modelValue);return C.value!==v&&(C.value=v),!0}function ie(){const v=V(e.modelValue)===!0&&se()&&t[C.value];return e.keepAlive===!0?[A(Bt,B.value,[A(N.value===!0?n(I.value,()=>({...ze,name:I.value})):ze,{key:I.value,style:d.value},()=>v)])]:[A("div",{class:"q-panel scroll",style:d.value,key:I.value,role:"tabpanel"},[v])]}function he(){if(t.length!==0)return e.animated===!0?[A(Vt,{name:b.value},ie)]:ie()}function be(v){return t=Lt(ne(v.default,[])).filter(_=>_.props!==null&&_.props.slot===void 0&&V(_.props.name)===!0),t.length}function ge(){return t}return Object.assign(s,{next:F,previous:Y,goTo:h}),{panelIndex:C,panelDirectives:p,updatePanelsList:be,updatePanelIndex:se,getPanelContent:he,getEnabledPanels:M,getPanels:ge,isValidPanelName:V,keepAliveProps:B,needsUniqueKeepAliveWrapper:N,goToPanelByOffset:D,goToPanel:h,nextPanel:F,previousPanel:Y}}const Oe=ae({name:"QTabPanel",props:ua,setup(e,{slots:a}){return()=>A("div",{class:"q-tab-panel",role:"tabpanel"},ne(a.default))}}),fa=ae({name:"QTabPanels",props:{...ca,...jt},emits:da,setup(e,{slots:a}){const s=pe(),n=Kt(e,s.proxy.$q),{updatePanelsList:i,getPanelContent:t,panelDirectives:u}=va(),b=x(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(a),Qt("div",{class:b.value},t(),"pan",e.swipeable,()=>u.value))}}),ma=Dt("chapter",()=>{const e=P(),a=P(),s=P(""),n=P(),i=P(),t=P(),u=P();async function b($){s.value="";try{if(e.value){const p=await Ne.getChapterWithPages($,e.value);return a.value=p.data,{success:!0,data:p.data}}}catch(p){return s.value=p.userMessage,{success:!1,error:p}}}async function C($){if(n.value&&i.value&&t.value){const p=await Ne.addChapter($,i.value,t.value,u.value,n.value);return n.value=null,i.value=null,t.value=null,u.value=null,a.value=p.data,console.log(p),a.value}}return{chapterId:e,chapter:a,errorMessage:s,newPagesFile:n,newTitle:i,newNumber:t,newDecimal:u,getChapter:b,addChapter:C}}),pa={class:"chapter-item cursor-pointer"},ha=["onClick"],ba={class:"number q-px-lg"},ga={class:"title q-px-lg"},ya={class:"paginator q-px-sm"},wa=He({__name:"ChaptersList",setup(e){const a=Xe(),s=et(),n=ma(),i=ot(),t=nt(),u=P(!1),b=async()=>{i.comicId&&(await n.addChapter(i.comicId),n.chapter&&s.chapters?.push(n.chapter))},C=()=>t.user!=null&&(t.user?.role=="admin"||t.user?.role=="writer"&&i.comic?.author.id==t.user.id),$=()=>{n.newNumber=null,n.newDecimal=null,n.newPagesFile=null,n.newTitle=null},p=async c=>{await a.push({name:"chapter",params:{comicId:c.comic_id,chapterId:c.id}})};return(c,l)=>(E(),X(Ht,{class:"chapter-list"},{default:q(()=>[C()?(E(),X(Te,{key:0,class:"full-width justify-center q-mx-2 q-py-xs q-px-none"},{default:q(()=>[T("div",pa,[T("div",{class:"q-px-lg",onClick:l[0]||(l[0]=d=>u.value=!0)}," Добавить новую главу + "),f(at,{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=d=>u.value=d),persistent:""},{default:q(()=>[f(fe,{style:{"min-width":"400px"}},{default:q(()=>[f(Z,null,{default:q(()=>[...l[9]||(l[9]=[T("div",{class:"text-h6"},"Заполните данные",-1)])]),_:1}),f(Z,{class:"q-pt-none"},{default:q(()=>[f(tt,{outlined:"",modelValue:y(n).newPagesFile,"onUpdate:modelValue":l[1]||(l[1]=d=>y(n).newPagesFile=d),label:"Прикрепите zip файл со страницами"},{prepend:q(()=>[f(te,{name:"attach_file"})]),_:1},8,["modelValue"])]),_:1}),f(Z,{class:"q-pt-none"},{default:q(()=>[f(Pe,{modelValue:y(n).newTitle,"onUpdate:modelValue":l[2]||(l[2]=d=>y(n).newTitle=d),label:"Название главы"},null,8,["modelValue"])]),_:1}),f(Z,{class:"row q-pt-none"},{default:q(()=>[f(Pe,{modelValue:y(n).newNumber,"onUpdate:modelValue":l[3]||(l[3]=d=>y(n).newNumber=d),label:"Номер главы"},null,8,["modelValue"]),f(Pe,{modelValue:y(n).newDecimal,"onUpdate:modelValue":l[4]||(l[4]=d=>y(n).newDecimal=d),label:"Номер части главы"},null,8,["modelValue"])]),_:1}),f(rt,{align:"right",class:"text-primary"},{default:q(()=>[ee(f(W,{flat:"",label:"Отменить",onClick:l[5]||(l[5]=d=>$())},null,512),[[me]]),ee(f(W,{flat:"",label:"Отправить",onClick:l[6]||(l[6]=d=>b())},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})):Ye("",!0),(E(!0),Ge(Ze,null,Je(y(s).chapters,d=>(E(),X(Te,{key:d.id,class:"full-width q-py-xs q-px-none"},{default:q(()=>[T("div",{class:"chapter-item cursor-pointer",onClick:I=>p(d)},[T("div",ba,H(d.full_chapter_number),1),f(Ut,{dark:"",vertical:""}),T("div",ga,H(d.title),1)],8,ha)]),_:2},1024))),128)),f(Te,{class:"paginator-wrapper q-py-xs"},{default:q(()=>[T("div",ya,[f(zt,{modelValue:y(s).currentPage,"onUpdate:modelValue":[l[8]||(l[8]=d=>y(s).currentPage=d),y(s).getPage],max:y(s).pagesCount,input:"",color:"white","input-class":"text-white"},null,8,["modelValue","onUpdate:modelValue","max"])])]),_:1})]),_:1}))}}),Ca=lt(wa,[["__scopeId","data-v-d35de0d9"]]),_a={class:"page-background bg-primary q-pa-lg"},qa={class:"left-column"},xa={class:"column q-gutter-y-md q-pt-md"},Ta={class:"right-column"},Pa={class:"header bg-dark q-px-sm shadow-3 q-py-xs"},ka={class:"row items-center q-gutter-md"},Sa={class:"row items-center"},Aa={class:"q-ml-xs"},Ia={class:"bg-dark shadow-3 q-px-md q-py-sm"},$a={class:"text-h5 text-white"},Va={class:"text-body1"},La={class:"q-mt-md"},Ba=He({__name:"ComicPage",props:{comicId:{}},setup(e){const a=e,s=nt(),n=ot(),i=et(),t=Xe(),u=P(!1),b=P("chapters"),C=()=>s.user!=null&&(s.user?.role=="admin"||s.user?.role=="writer"&&n.comic?.author.id==s.user.id),$=async()=>{console.log(n.comic),n.comic&&n.comic.first_chapter&&await t.push({name:"chapter",params:{comicId:n.comicId,chapterId:n.comic.first_chapter.id}})};return We(async()=>{(!n.comic||n.comic.id!=n.comicId)&&(n.comicId=a.comicId,await n.getComic(),await i.getChapters(n.comicId))}),(p,c)=>(E(),X(Yt,{class:"comics-detail-page shadow-5 q-pt-xl",style:Rt("background: linear-gradient(rgba(63, 63, 63, 0.80), rgba(17, 17, 17, 1)),url("+y(n).comic?.cover_image+")center/cover no-repeat;")},{default:q(()=>[T("div",_a,[T("div",qa,[f(gt,{src:y(n).comic?.cover_image,alt:"картинка",ratio:3/4,class:"rounded-borders comic-cover",fit:"cover"},null,8,["src"]),f(W,{class:"q-mt-sm",color:y(n).comic?.has_chapters?"accent":"primary",label:"Читать",onClick:c[0]||(c[0]=l=>$())},null,8,["color"]),ee(T("div",xa,[f(W,{color:"secondary",label:"Сменить обложку",onClick:c[1]||(c[1]=l=>u.value=!0)}),y(n).comic?.status=="draft"?(E(),X(W,{key:0,color:"secondary",label:"Опубликовать",onClick:c[2]||(c[2]=l=>y(n).publishComic())})):Ye("",!0),f(W,{color:"primary",label:"Редактировать"}),f(at,{modelValue:u.value,"onUpdate:modelValue":c[6]||(c[6]=l=>u.value=l),persistent:""},{default:q(()=>[f(fe,{style:{"min-width":"350px"}},{default:q(()=>[f(Z,null,{default:q(()=>[...c[9]||(c[9]=[T("div",{class:"text-h6"},"Прикрепите файл",-1)])]),_:1}),f(Z,{class:"q-pt-none"},{default:q(()=>[f(tt,{outlined:"",modelValue:y(n).newFileCover,"onUpdate:modelValue":c[3]||(c[3]=l=>y(n).newFileCover=l)},{prepend:q(()=>[f(te,{name:"attach_file"})]),_:1},8,["modelValue"])]),_:1}),f(rt,{class:"text-primary"},{default:q(()=>[ee(f(W,{flat:"",label:"Отменить",onClick:c[4]||(c[4]=l=>y(n).newFileCover=void 0)},null,512),[[me]]),ee(f(W,{flat:"",label:"Отправить",onClick:c[5]||(c[5]=l=>y(n).updateCover())},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],512),[[Mt,C()]])]),T("div",Ta,[T("div",Pa,[T("div",ka,[T("div",Sa,[T("span",Aa,H(y(n).comic?.rating),1)]),c[10]||(c[10]=T("span",null,"•",-1)),T("span",null,H(y(n).comic?.year),1),c[11]||(c[11]=T("span",null,"•",-1)),T("span",null,H(y(n).comic?.type),1)])]),T("div",Ia,[T("span",$a,H(y(n).comic?.title),1)]),f(fe,{class:"description shadow-3 bg-dark text-white q-pa-md"},{default:q(()=>[T("div",Va,H(y(n).comic?.description),1),T("div",La,[(E(!0),Ge(Ze,null,Je(y(n).comic?.tags,l=>(E(),X(Ft,{key:l.id,color:"secondary","text-color":"white",class:"q-mr-xs q-mb-xs cursor-pointer"},{default:q(()=>[Nt(H(l.title),1)]),_:2},1024))),128))])]),_:1}),f(fe,{class:"menu bg-dark shadow-3 q-pa-md text-white"},{default:q(()=>[f(na,{modelValue:b.value,"onUpdate:modelValue":c[7]||(c[7]=l=>b.value=l),dense:"",class:"text-white","active-color":"white","indicator-color":"primary",align:"justify"},{default:q(()=>[f(Ee,{name:"chapters",label:"Главы",class:"bg-accent"}),f(Ee,{name:"comments",label:"Комментарии",class:"bg-accent"})]),_:1},8,["modelValue"]),f(fa,{modelValue:b.value,"onUpdate:modelValue":c[8]||(c[8]=l=>b.value=l),animated:""},{default:q(()=>[f(Oe,{class:"q-pa-none bg-dark",name:"chapters"},{default:q(()=>[y(i).chapters?(E(),X(Ca,{key:0})):(E(),X(Ot,{key:1,type:"rect"}))]),_:1}),f(Oe,{class:"q-pa-none",name:"comments"})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["style"]))}}),Ha=lt(Ba,[["__scopeId","data-v-976d7a75"]]);export{Ha as default};
