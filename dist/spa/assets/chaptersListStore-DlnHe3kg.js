import{k as se,P as Fe,g as G,R as _e,c as v,ag as Te,h as y,Q as ie,ax as Ee,U as J,a1 as ze,r as F,q as Pe,a8 as R,ay as Be,as as Ve,v as xe,az as ue,C as A,aA as Le,w as ce,aw as De,ad as de,l as Ae,V as je}from"./index-CotuCIFZ.js";import{b as Re,c as He,d as Oe}from"./authStore-xItSMJjH.js";import{b as Ie,u as Me,i as $e,e as Ne,f as Ke,j as We,g as fe,d as Qe}from"./QInput-Bv3lXzZF.js";import{h as Ue}from"./comicStore-BvRtKuin.js";import{u as Xe}from"./use-timeout-Bk_d-OnF.js";import{b as Ye,a as Ge,v as Je,i as Ze,u as et,j as tt,d as lt,k as it,m as nt,l as at,o as ot,n as st,q as me,r as ve}from"./focusout-Imng4tnd.js";import{c as ge}from"./comicsService-CJ7xB10R.js";const rt={xs:8,sm:10,md:14,lg:20,xl:24},ut=se({name:"QChip",props:{...Re,...Fe,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:u}){const{proxy:{$q:a}}=G(),i=He(e,a),o=_e(e,rt),d=v(()=>e.selected===!0||e.icon!==void 0),S=v(()=>e.selected===!0?e.iconSelected||a.iconSet.chip.selected:e.icon),h=v(()=>e.iconRemove||a.iconSet.chip.remove),f=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),_=v(()=>{const s=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(s?` text-${s} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(f.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(i.value===!0?" q-chip--dark q-dark":"")}),T=v(()=>{const s=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},B={...s,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||a.lang.label.remove};return{chip:s,remove:B}});function E(s){s.keyCode===13&&z(s)}function z(s){e.disable||(u("update:selected",!e.selected),u("click",s))}function P(s){(s.keyCode===void 0||s.keyCode===13)&&(J(s),e.disable===!1&&(u("update:modelValue",!1),u("remove")))}function g(){const s=[];f.value===!0&&s.push(y("div",{class:"q-focus-helper"})),d.value===!0&&s.push(y(ie,{class:"q-chip__icon q-chip__icon--left",name:S.value}));const B=e.label!==void 0?[y("div",{class:"ellipsis"},[e.label])]:void 0;return s.push(y("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ee(t.default,B))),e.iconRight&&s.push(y(ie,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&s.push(y(ie,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...T.value.remove,onClick:P,onKeyup:P})),s}return()=>{if(e.modelValue===!1)return;const s={class:_.value,style:o.value};return f.value===!0&&Object.assign(s,T.value.chip,{onClick:z,onKeyup:E}),Te("div",s,g(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ze,e.ripple]])}}});function M(e,t,u,a){const i=[];return e.forEach(o=>{a(o)===!0?i.push(o):t.push({failedPropValidation:u,file:o})}),i}function U(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),J(e)}const ct={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},dt=["rejected"];function ft({editable:e,dnd:t,getFileInput:u,addFilesToQueue:a}){const{props:i,emit:o,proxy:d}=G(),S=F(null),h=v(()=>i.accept!==void 0?i.accept.split(",").map(l=>(l=l.trim(),l==="*"?"*/":(l.endsWith("/*")&&(l=l.slice(0,l.length-1)),l.toUpperCase()))):null),f=v(()=>parseInt(i.maxFiles,10)),_=v(()=>parseInt(i.maxTotalSize,10));function T(l){if(e.value)if(l!==Object(l)&&(l={target:null}),l.target?.matches('input[type="file"]')===!0)l.clientX===0&&l.clientY===0&&Pe(l);else{const C=u();C!==l.target&&C?.click(l)}}function E(l){e.value&&l&&a(null,l)}function z(l,C,V,L){let c=Array.from(C||l.target.files);const x=[],q=()=>{x.length!==0&&o("rejected",x)};if(i.accept!==void 0&&h.value.indexOf("*/")===-1&&(c=M(c,x,"accept",m=>h.value.some(b=>m.type.toUpperCase().startsWith(b)||m.name.toUpperCase().endsWith(b))),c.length===0))return q();if(i.maxFileSize!==void 0){const m=parseInt(i.maxFileSize,10);if(c=M(c,x,"max-file-size",b=>b.size<=m),c.length===0)return q()}if(i.multiple!==!0&&c.length!==0&&(c=[c[0]]),c.forEach(m=>{m.__key=m.webkitRelativePath+m.lastModified+m.name+m.size}),L===!0){const m=V.map(b=>b.__key);c=M(c,x,"duplicate",b=>m.includes(b.__key)===!1)}if(c.length===0)return q();if(i.maxTotalSize!==void 0){let m=L===!0?V.reduce((b,$)=>b+$.size,0):0;if(c=M(c,x,"max-total-size",b=>(m+=b.size,m<=_.value)),c.length===0)return q()}if(typeof i.filter=="function"){const m=i.filter(c);c=M(c,x,"filter",b=>m.includes(b))}if(i.maxFiles!==void 0){let m=L===!0?V.length:0;if(c=M(c,x,"max-files",()=>(m++,m<=f.value)),c.length===0)return q()}if(q(),c.length!==0)return c}function P(l){U(l),t.value!==!0&&(t.value=!0)}function g(l){J(l),(l.relatedTarget!==null||R.is.safari!==!0?l.relatedTarget!==S.value:document.elementsFromPoint(l.clientX,l.clientY).includes(S.value)===!1)===!0&&(t.value=!1)}function s(l){U(l);const C=l.dataTransfer.files;C.length!==0&&a(null,C),t.value=!1}function B(l){if(t.value===!0)return y("div",{ref:S,class:`q-${l}__dnd absolute-full`,onDragenter:U,onDragover:U,onDragleave:g,onDrop:s})}return Object.assign(d,{pickFiles:T,addFiles:E}),{pickFiles:T,addFiles:E,onDragover:P,onDragleave:g,processFiles:z,getDndNode:B,maxFilesNumber:f,maxTotalSizeNumber:_}}const _t=se({name:"QFile",inheritAttrs:!1,props:{...$e,...Me,...ct,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Ie,...dt],setup(e,{slots:t,emit:u,attrs:a}){const{proxy:i}=G(),o=Ne(),d=F(null),S=F(!1),h=Ke(e),{pickFiles:f,onDragover:_,onDragleave:T,processFiles:E,getDndNode:z}=ft({editable:o.editable,dnd:S,getFileInput:D,addFilesToQueue:Q}),P=We(e),g=v(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),s=v(()=>fe(g.value)),B=v(()=>g.value.map(n=>n.name).join(", ")),l=v(()=>Ue(g.value.reduce((n,p)=>n+p.size,0))),C=v(()=>({totalSize:l.value,filesNumber:g.value.length,maxFiles:e.maxFiles})),V=v(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:h.value,...a,id:o.targetUid.value,disabled:o.editable.value!==!0})),L=v(()=>"q-file q-field--auto-height"+(S.value===!0?" q-file--dnd":"")),c=v(()=>e.multiple===!0&&e.append===!0);function x(n){const p=g.value.slice();p.splice(n,1),m(p)}function q(n){const p=g.value.indexOf(n);p!==-1&&x(p)}function m(n){u("update:modelValue",e.multiple===!0?n:n[0])}function b(n){n.keyCode===13&&Ve(n)}function $(n){(n.keyCode===13||n.keyCode===32)&&f(n)}function D(){return d.value}function Q(n,p){const k=E(n,p,g.value,c.value),O=D();O!=null&&(O.value=""),k!==void 0&&((e.multiple===!0?e.modelValue&&k.every(N=>g.value.includes(N)):e.modelValue===k[0])||m(c.value===!0?g.value.concat(k):k))}function H(){return[y("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Z(){if(t.file!==void 0)return g.value.length===0?H():g.value.map((p,k)=>t.file({index:k,file:p,ref:this}));if(t.selected!==void 0)return g.value.length===0?H():t.selected({files:g.value,ref:this});if(e.useChips===!0)return g.value.length===0?H():g.value.map((p,k)=>y(ut,{key:"file-"+k,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{x(k)}},()=>y("span",{class:"ellipsis",textContent:p.name})));const n=e.displayValue!==void 0?e.displayValue:B.value;return n.length!==0?[y("div",{class:e.inputClass,style:e.inputStyle,textContent:n})]:H()}function ee(){const n={ref:d,...V.value,...P.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:Q};return e.multiple===!0&&(n.multiple=!0),y("input",n)}return Object.assign(o,{fieldClass:L,emitValue:m,hasValue:s,inputRef:d,innerValue:g,floatingLabel:v(()=>s.value===!0||fe(e.displayValue)),computedCounter:v(()=>{if(e.counterLabel!==void 0)return e.counterLabel(C.value);const n=e.maxFiles;return`${g.value.length}${n!==void 0?" / "+n:""} (${l.value})`}),getControlChild:()=>z("file"),getControl:()=>{const n={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(n,{onDragover:_,onDragleave:T,onKeydown:b,onKeyup:$}),y("div",n,[ee()].concat(Z()))}}),Object.assign(i,{removeAtIndex:x,removeFile:q,getNativeElement:()=>d.value}),Be(i,"nativeEl",()=>d.value),Qe(o)}});function mt(e,t,u){let a;function i(){a!==void 0&&(ue.remove(a),a=void 0)}return xe(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){a={condition:()=>u.value===!0,handler:t},ue.add(a)}}}let K=0,ne,ae,W,oe=!1,he,be,ye,j=null;function vt(e){gt(e)&&J(e)}function gt(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Le(e),u=e.shiftKey&&!e.deltaX,a=!u&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=u||a?e.deltaY:e.deltaX;for(let o=0;o<t.length;o++){const d=t[o];if(Je(d,a))return a?i<0&&d.scrollTop===0?!0:i>0&&d.scrollTop+d.clientHeight===d.scrollHeight:i<0&&d.scrollLeft===0?!0:i>0&&d.scrollLeft+d.clientWidth===d.scrollWidth}return!0}function pe(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function X(e){oe!==!0&&(oe=!0,requestAnimationFrame(()=>{oe=!1;const{height:t}=e.target,{clientHeight:u,scrollTop:a}=document.scrollingElement;(W===void 0||t!==window.innerHeight)&&(W=u-t,document.scrollingElement.scrollTop=a),a>W&&(document.scrollingElement.scrollTop-=Math.ceil((a-W)/8))}))}function Se(e){const t=document.body,u=window.visualViewport!==void 0;if(e==="add"){const{overflowY:a,overflowX:i}=window.getComputedStyle(t);ne=Ye(window),ae=Ge(window),he=t.style.left,be=t.style.top,ye=window.location.href,t.style.left=`-${ne}px`,t.style.top=`-${ae}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),a!=="hidden"&&(a==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,R.is.ios===!0&&(u===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",X,A.passiveCapture),window.visualViewport.addEventListener("scroll",X,A.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",pe,A.passiveCapture))}R.is.desktop===!0&&R.is.mac===!0&&window[`${e}EventListener`]("wheel",vt,A.notPassive),e==="remove"&&(R.is.ios===!0&&(u===!0?(window.visualViewport.removeEventListener("resize",X,A.passiveCapture),window.visualViewport.removeEventListener("scroll",X,A.passiveCapture)):window.removeEventListener("scroll",pe,A.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=he,t.style.top=be,window.location.href===ye&&window.scrollTo(ne,ae),W=void 0)}function ht(e){let t="add";if(e===!0){if(K++,j!==null){clearTimeout(j),j=null;return}if(K>1)return}else{if(K===0||(K--,K>0))return;if(t="remove",R.is.ios===!0&&R.is.nativeMobile===!0){j!==null&&clearTimeout(j),j=setTimeout(()=>{Se(t),j=null},100);return}}Se(t)}function bt(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,ht(t))}}}let Y=0;const yt={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},we={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Tt=se({name:"QDialog",inheritAttrs:!1,props:{...tt,...et,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...Ze,"shake","click","escapeKey"],setup(e,{slots:t,emit:u,attrs:a}){const i=G(),o=F(null),d=F(!1),S=F(!1);let h=null,f=null,_,T;const E=v(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:z}=bt(),{registerTimeout:P}=Xe(),{registerTick:g,removeTick:s}=lt(),{transitionProps:B,transitionStyle:l}=it(e,()=>we[e.position][0],()=>we[e.position][1]),C=v(()=>l.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:V,hidePortal:L,portalIsAccessible:c,renderPortal:x}=nt(i,o,Ce,"dialog"),{hide:q}=at({showing:d,hideOnRouteChange:E,handleShow:Z,handleHide:ee,processOnMount:!0}),{addToHistory:m,removeFromHistory:b}=mt(d,q,E),$=v(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${yt[e.position]}`+(S.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),D=v(()=>d.value===!0&&e.seamless!==!0),Q=v(()=>e.autoClose===!0?{onClick:ke}:{}),H=v(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${D.value===!0?"modal":"seamless"}`,a.class]);ce(()=>e.maximized,r=>{d.value===!0&&N(r)}),ce(D,r=>{z(r),r===!0?(ot(te),st(k)):(me(te),ve(k))});function Z(r){m(),f=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,N(e.maximized),V(),S.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),g(n)):s(),P(()=>{if(i.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:w,bottom:I}=document.activeElement.getBoundingClientRect(),{innerHeight:re}=window,le=window.visualViewport!==void 0?window.visualViewport.height:re;w>0&&I>le/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-le,I>=re?1/0:Math.ceil(document.scrollingElement.scrollTop+I-le/2))),document.activeElement.scrollIntoView()}T=!0,o.value.click(),T=!1}V(!0),S.value=!1,u("show",r)},e.transitionDuration)}function ee(r){s(),b(),O(!0),S.value=!0,L(),f!==null&&(((r?.type.indexOf("key")===0?f.closest('[tabindex]:not([tabindex^="-"])'):void 0)||f).focus(),f=null),P(()=>{L(!0),S.value=!1,u("hide",r)},e.transitionDuration)}function n(r){Oe(()=>{let w=o.value;if(w!==null){if(r!==void 0){const I=w.querySelector(r);if(I!==null){I.focus({preventScroll:!0});return}}w.contains(document.activeElement)!==!0&&(w=w.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||w.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||w.querySelector("[autofocus], [data-autofocus]")||w,w.focus({preventScroll:!0}))}})}function p(r){r&&typeof r.focus=="function"?r.focus({preventScroll:!0}):n(),u("shake");const w=o.value;w!==null&&(w.classList.remove("q-animate--scale"),w.classList.add("q-animate--scale"),h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,o.value!==null&&(w.classList.remove("q-animate--scale"),n())},170))}function k(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&p():(u("escapeKey"),q()))}function O(r){h!==null&&(clearTimeout(h),h=null),(r===!0||d.value===!0)&&(N(!1),e.seamless!==!0&&(z(!1),me(te),ve(k))),r!==!0&&(f=null)}function N(r){r===!0?_!==!0&&(Y<1&&document.body.classList.add("q-body--dialog"),Y++,_=!0):_===!0&&(Y<2&&document.body.classList.remove("q-body--dialog"),Y--,_=!1)}function ke(r){T!==!0&&(q(r),u("click",r))}function qe(r){e.persistent!==!0&&e.noBackdropDismiss!==!0?q(r):e.noShake!==!0&&p()}function te(r){e.allowFocusOutside!==!0&&c.value===!0&&De(o.value,r.target)!==!0&&n('[tabindex]:not([tabindex="-1"])')}Object.assign(i.proxy,{focus:n,shake:p,__updateRefocusTarget(r){f=r||null}}),xe(O);function Ce(){return y("div",{role:"dialog","aria-modal":D.value===!0?"true":"false",...a,class:H.value},[y(de,{name:"q-transition--fade",appear:!0},()=>D.value===!0?y("div",{class:"q-dialog__backdrop fixed-full",style:C.value,"aria-hidden":"true",tabindex:-1,onClick:qe}):null),y(de,B.value,()=>d.value===!0?y("div",{ref:o,class:$.value,style:l.value,tabindex:-1,...Q.value},Ae(t.default)):null)])}return x}});let pt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,pt=e.scrollLeft>=0,e.remove()}const Et=je("chapters",()=>{const e=F(),t=F(null),u=F(1),a=F(0),i=F(5),o=F("");async function d(h){o.value="";try{const f=await ge.getChapters(h,i.value);return e.value=f.data.data,t.value=f.data.links,a.value=f.data.last_page,{success:!0,data:f.data}}catch(f){return o.value=f.userMessage,{success:!1,error:f}}}async function S(){let h;if(t.value!==null){const f=t.value[u.value];typeof f<"u"&&f!==null&&(h=await ge.getPage(f.url),e.value=h.data.data,t.value=h.data.links,a.value=h.data.last_page)}}return{chapters:e,links:t,errorMessage:o,currentPage:u,pagesCount:a,perPage:i,getChapters:d,getPage:S}});export{_t as Q,Tt as a,ut as b,pt as r,Et as u};
