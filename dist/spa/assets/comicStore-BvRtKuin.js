import{k as $,g as B,a as p,t as d,u as F,z as Q,c as f,h as x,l as z,V as M,r}from"./index-CotuCIFZ.js";import{c as g}from"./comicsService-CJ7xB10R.js";const h=["B","KB","MB","GB","TB","PB"];function b(e,a=1){let n=0;for(;parseInt(e,10)>=1024&&n<h.length-1;)e/=1024,++n;return`${e.toFixed(a)}${h[n]}`}function T(e,a,n){return n<=a?a:Math.min(n,Math.max(a,e))}function I(e,a,n){if(n<=a)return a;const t=n-a+1;let s=a+(e-a)%t;return s<a&&(s=t+s),s===0?0:s}const q=$({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:a}){const{proxy:{$q:n}}=B(),t=p(F,d);if(t===d)return console.error("QPage needs to be a deep child of QLayout"),d;if(p(Q,d)===d)return console.error("QPage needs to be child of QPageContainer"),d;const l=f(()=>{const u=(t.header.space===!0?t.header.size:0)+(t.footer.space===!0?t.footer.size:0);if(typeof e.styleFn=="function"){const v=t.isContainer.value===!0?t.containerHeight.value:n.screen.height;return e.styleFn(u,v)}return{minHeight:t.isContainer.value===!0?t.containerHeight.value-u+"px":n.screen.height===0?u!==0?`calc(100vh - ${u}px)`:"100vh":n.screen.height-u+"px"}}),i=f(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>x("main",{class:i.value,style:l.value},z(a.default))}}),H=M("comic",()=>{const e=r(null),a=r(),n=r(""),t=r(),s=r(),l=r(),i=r(),u=r(),v=r();async function m(){n.value="";try{if(a.value){const o=await g.getComic(a.value);return e.value=o.data,{success:!0,data:o.data}}}catch(o){return n.value=o.userMessage,{success:!1,error:o}}}async function y(){if(e.value&&e.value.status!=="published"){const o=await g.publishComic(e.value.id);console.log(o),e.value.status=o.data}}async function C(){if(e.value&&t.value){const o=await g.uploadCover(e.value.id,t.value);e.value.cover_image=o.data.cover_image,t.value=void 0}}async function w(){if(s.value&&v.value&&l.value&&i.value&&u.value){const o=l.value.map(c=>c.id);try{const c=await g.addComic(s.value,t.value,o,i.value,u.value,v.value);e.value=c.data,a.value=c.data.id,console.log(c),t.value=void 0,s.value=null,l.value=null,i.value="",u.value="",v.value=""}catch(c){return n.value=c.userMessage,{success:!1,error:c}}}}return{comic:e,comicId:a,newYear:u,newType:i,newTitle:s,newDescription:v,newTags:l,newFileCover:t,errorMessage:n,getComic:m,updateCover:C,addComic:w,publishComic:y}});export{q as Q,T as b,b as h,I as n,H as u};
